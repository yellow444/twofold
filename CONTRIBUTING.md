# Руководство для контрибьюторов

Спасибо за интерес к проекту «Сервис анализа активности БПЛА». Этот документ описывает базовые правила работы с репозиторием и помогает сохранить единый процесс для всех команд.

## Общие принципы

* Все изменения выполняются через pull request (PR), прямые коммиты в `main` запрещены.
* Перед началом работы убедитесь, что требования и артефакты этапа указаны в [plan.md](plan.md); PR должен ссылаться на актуальный пункт плана.
* Для задач из нескольких компонент разбивайте изменения на независимые PR, чтобы упростить ревью.

## Ветвление и pull request

1. Создайте ветку от `main`, используя префиксы по типу работы:
   * `feature/<краткое-описание>` — новые возможности;
   * `bugfix/<идентификатор>` — исправления ошибок;
   * `hotfix/<идентификатор>` — срочные исправления в продуктиве;
   * `docs/<тема>` — документация.
2. В описании PR укажите:
   * суть изменений и связанные задачи/тикеты;
   * компонент(ы), которых коснулось изменение;
   * чек-лист запусков проверок.
3. Минимум два аппрува от владельцев областей из `CODEOWNERS` требуется перед слиянием.
4. PR должен быть актуален с `main` (при необходимости выполните rebase или merge).

## Обязательные проверки

Перед созданием PR локально выполните следующие команды и приложите результаты в описание:

```bash
# Линтеры
npm run lint --prefix frontend
npm run lint --prefix backend

# Юнит-тесты
npm test --prefix frontend
npm test --prefix backend
pytest agents

dotnet test backend

# Сборки
npm run build --prefix frontend
npm run build --prefix backend

docker compose -f infra/docker-compose.yml build
```

> Если команда временно не применима к вашей области (например, компонент ещё не инициализирован), отметьте это в PR и укажите причины.

## Правила коммитов

* Используйте формат [Conventional Commits](https://www.conventionalcommits.org/ru/v1.0.0/) (`feat:`, `fix:`, `chore:`, `docs:`, `refactor:` и т.д.).
* Один коммит — одна логическая единица работы. Не смешивайте refactor и функциональные изменения в одном коммите.
* Сообщение коммита должно быть на английском языке, тело — по необходимости.

## Проверка соответствия плану

* На стадии ревью владельцы из `CODEOWNERS` сверяют изменения с требованиями этапа, описанными в [plan.md](plan.md).
* Если изменения затрагивают несколько этапов, опишите в PR стратегию интеграции и потенциальные риски.
* Документацию в `docs/` обновляйте одновременно с кодом, чтобы артефакты оставались консистентными.

Спасибо за вклад в развитие проекта!
